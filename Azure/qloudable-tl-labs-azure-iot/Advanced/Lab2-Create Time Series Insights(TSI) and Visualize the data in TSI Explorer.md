# Create Time Series Insights(TSI) and Visualize the data in TSI Explorer

## Table of Contents

[Overview](#overview)

[Pre-Requisites](#pre-requisites) 

[Exercise 1: Create Time Series Insights using Azure Portal](#exercise-1-create-time-series-insights-using-azure-portal)

[Exercise 2: Grant Data Access](#exercise-2-grant-data-access)

[Exercise 3: Create IoT Hub using Azure Portal](#exercise-3-create-iot-hub-using-azure-portal)

[Exercise 4: Add an IoT Hub Event source to your Time Series Insights Environment](#exercise-4-add-an-iot-hub-event-source-to-your-time-series-insights-environment)

[Exercise 5: Visualize the Data in Time Series Insights Explorer](#exercise-5-visualize-the-data-in-time-series-insights-explorer)

## Overview

**Introduction to Time Series Insights (TSI)**

Azure Time Series Insights is a fully managed cloud service with Analytics, Storage and Visualization components that makes it simple to explore, store, ingest and analyze billions of IoT events generated by IoT devices simultaneously.

Azure Time Series Insights captures and stores every new event as a row, and change is efficiently measured over time. It is device agnostic requires no coding.

When dealing with more of IoT devices, it is difficult to monitor them all at once. However, using the new technology from Microsoft, Azure Time Series Insights. It allows you to validate your IOT solution and analyze them in a relatively simple way by organizing your data. It can help you find device issues early and enable features like predictive maintenance. 

### Scenario and Objective

In this Lab you will Learn:

1. Creating Time Series Insights using Azure Portal

2. Grant Data Access

3. Add an IoT Hub Event source to your Time Series Insights Environment

4. Visualize the Data in Time Series Insights Explorer

## Pre-Requisites

1. Azure Portal

## Exercise 1: Create Time Series Insights using Azure Portal

Using the Chrome browser, login into Azure Portal with the below details.

 **Azure login_ID:** {{azure-login-id}} <br>
 **Azure login_Password:** {{azure-login-password}}

![alt text](https://qloudableassets.blob.core.windows.net/microsoft-learning/Az900/Lab4-Web%20Apps%20and%20cloud%20services/portal1.png?st=2020-10-05T07%3A50%3A00Z&se=2023-10-06T07%3A50%3A00Z&sp=rl&sv=2018-03-28&sr=c&sig=p9wks0unAenwA2Yxsd3LrxlZ9Pns%2BVcq%2BatWQTccXuA%3D)

![alt text](https://qloudableassets.blob.core.windows.net/microsoft-learning/Az900/Lab4-Web%20Apps%20and%20cloud%20services/portal2.png?st=2020-10-05T07%3A50%3A00Z&se=2023-10-06T07%3A50%3A00Z&sp=rl&sv=2018-03-28&sr=c&sig=p9wks0unAenwA2Yxsd3LrxlZ9Pns%2BVcq%2BatWQTccXuA%3D)

![alt text](https://qloudableassets.blob.core.windows.net/microsoft-learning/Az900/Lab4-Web%20Apps%20and%20cloud%20services/portal3.png?st=2020-10-05T07%3A50%3A00Z&se=2023-10-06T07%3A50%3A00Z&sp=rl&sv=2018-03-28&sr=c&sig=p9wks0unAenwA2Yxsd3LrxlZ9Pns%2BVcq%2BatWQTccXuA%3D)

![alt text](https://qloudableassets.blob.core.windows.net/microsoft-learning/Az900/Lab4-Web%20Apps%20and%20cloud%20services/portal4.png?st=2020-10-05T07%3A50%3A00Z&se=2023-10-06T07%3A50%3A00Z&sp=rl&sv=2018-03-28&sr=c&sig=p9wks0unAenwA2Yxsd3LrxlZ9Pns%2BVcq%2BatWQTccXuA%3D)

Select the **+Create resource** button and search for Time Series Insights and click on **Time Series Insights** from the drop down as shown like below screenshot.

![alt text](https://qloudableassets.blob.core.windows.net/az-iot-labs/Advanced/Lab2/1.PNG?st=2019-10-22T09%3A45%3A30Z&se=2022-10-23T09%3A45%3A00Z&sp=rl&sv=2018-03-28&sr=c&sig=FGnsVkizYvdjNm%2Bhy4Ewuyfrtdsga7OJT06BDSwHe1M%3D)

Then click on **Create** to continue creating Time Series Insights.

![alt text](https://qloudableassets.blob.core.windows.net/az-iot-labs/Advanced/Lab2/2.PNG?st=2019-10-22T09%3A45%3A30Z&se=2022-10-23T09%3A45%3A00Z&sp=rl&sv=2018-03-28&sr=c&sig=FGnsVkizYvdjNm%2Bhy4Ewuyfrtdsga7OJT06BDSwHe1M%3D)

Fill in the required fields, following the instructions below:


* **Environment name:** enter a unique name for your Time Series Insights Environment <br> 
* **Subscription:** select as default from the dropdown <br>
* **Resource Group:** {{resource-group-name}} <br>
* **Location:** {{location}} <br>
* **Pricing tier:** S1 <br>
* **Capacity:** select a capacity of 1


Click on **Next**.

![alt text](https://qloudableassets.blob.core.windows.net/az-iot-labs/Advanced/Lab2/3.PNG?st=2019-10-22T09%3A45%3A30Z&se=2022-10-23T09%3A45%3A00Z&sp=rl&sv=2018-03-28&sr=c&sig=FGnsVkizYvdjNm%2Bhy4Ewuyfrtdsga7OJT06BDSwHe1M%3D)

Toggle the button to **No** for Create an Event source and click on **Review + Create**.

![alt text](https://qloudableassets.blob.core.windows.net/az-iot-labs/Advanced/Lab2/4.PNG?st=2019-10-22T09%3A45%3A30Z&se=2022-10-23T09%3A45%3A00Z&sp=rl&sv=2018-03-28&sr=c&sig=FGnsVkizYvdjNm%2Bhy4Ewuyfrtdsga7OJT06BDSwHe1M%3D)

Click on **Create**, on the next step, which will take a few minutes to create Time Series Insights. 

![alt text](https://qloudableassets.blob.core.windows.net/az-iot-labs/Advanced/Lab2/5.PNG?st=2019-10-22T09%3A45%3A30Z&se=2022-10-23T09%3A45%3A00Z&sp=rl&sv=2018-03-28&sr=c&sig=FGnsVkizYvdjNm%2Bhy4Ewuyfrtdsga7OJT06BDSwHe1M%3D)

You’ll receive a notification on a successful deployment, as shown in the screenshot below.

![alt text](https://qloudableassets.blob.core.windows.net/az-iot-labs/Advanced/Lab2/6.PNG?st=2019-10-22T09%3A45%3A30Z&se=2022-10-23T09%3A45%3A00Z&sp=rl&sv=2018-03-28&sr=c&sig=FGnsVkizYvdjNm%2Bhy4Ewuyfrtdsga7OJT06BDSwHe1M%3D)

Go to **Resource group** -> select your **Time Series Insights** -> Overview -> Click **Go to Environment**.

![alt text](https://qloudableassets.blob.core.windows.net/az-iot-labs/Advanced/Lab2/7.PNG?st=2019-10-22T09%3A45%3A30Z&se=2022-10-23T09%3A45%3A00Z&sp=rl&sv=2018-03-28&sr=c&sig=FGnsVkizYvdjNm%2Bhy4Ewuyfrtdsga7OJT06BDSwHe1M%3D)

![alt text](https://qloudableassets.blob.core.windows.net/az-iot-labs/Advanced/Lab2/8.PNG?st=2019-10-22T09%3A45%3A30Z&se=2022-10-23T09%3A45%3A00Z&sp=rl&sv=2018-03-28&sr=c&sig=FGnsVkizYvdjNm%2Bhy4Ewuyfrtdsga7OJT06BDSwHe1M%3D)

![alt text](https://qloudableassets.blob.core.windows.net/az-iot-labs/Advanced/Lab2/9.PNG?st=2019-10-22T09%3A45%3A30Z&se=2022-10-23T09%3A45%3A00Z&sp=rl&sv=2018-03-28&sr=c&sig=FGnsVkizYvdjNm%2Bhy4Ewuyfrtdsga7OJT06BDSwHe1M%3D)

Then you will be redirected to your Time Series Insights Explorer.

![alt text](https://qloudableassets.blob.core.windows.net/az-iot-labs/Advanced/Lab2/10.PNG?st=2019-10-22T09%3A45%3A30Z&se=2022-10-23T09%3A45%3A00Z&sp=rl&sv=2018-03-28&sr=c&sig=FGnsVkizYvdjNm%2Bhy4Ewuyfrtdsga7OJT06BDSwHe1M%3D)

## Exercise 2: Grant Data Access

Follow the below steps to grant data access for a user.

Sign Out and try logging in to Time Series Insights Explorer with **new user**. 

![alt text](https://qloudableassets.blob.core.windows.net/az-iot-labs/Advanced/Lab2/11.PNG?st=2019-10-22T09%3A45%3A30Z&se=2022-10-23T09%3A45%3A00Z&sp=rl&sv=2018-03-28&sr=c&sig=FGnsVkizYvdjNm%2Bhy4Ewuyfrtdsga7OJT06BDSwHe1M%3D)

![alt text](https://qloudableassets.blob.core.windows.net/az-iot-labs/Advanced/Lab2/12.PNG?st=2019-10-22T09%3A45%3A30Z&se=2022-10-23T09%3A45%3A00Z&sp=rl&sv=2018-03-28&sr=c&sig=FGnsVkizYvdjNm%2Bhy4Ewuyfrtdsga7OJT06BDSwHe1M%3D)

![alt text](https://qloudableassets.blob.core.windows.net/az-iot-labs/Advanced/Lab2/13.PNG?st=2019-10-22T09%3A45%3A30Z&se=2022-10-23T09%3A45%3A00Z&sp=rl&sv=2018-03-28&sr=c&sig=FGnsVkizYvdjNm%2Bhy4Ewuyfrtdsga7OJT06BDSwHe1M%3D)

![alt text](https://qloudableassets.blob.core.windows.net/az-iot-labs/Advanced/Lab2/14.PNG?st=2019-10-22T09%3A45%3A30Z&se=2022-10-23T09%3A45%3A00Z&sp=rl&sv=2018-03-28&sr=c&sig=FGnsVkizYvdjNm%2Bhy4Ewuyfrtdsga7OJT06BDSwHe1M%3D)

![alt text](https://qloudableassets.blob.core.windows.net/az-iot-labs/Advanced/Lab2/15.PNG?st=2019-10-22T09%3A45%3A30Z&se=2022-10-23T09%3A45%3A00Z&sp=rl&sv=2018-03-28&sr=c&sig=FGnsVkizYvdjNm%2Bhy4Ewuyfrtdsga7OJT06BDSwHe1M%3D)

![alt text](https://qloudableassets.blob.core.windows.net/az-iot-labs/Advanced/Lab2/16.PNG?sv=2019-10-10&st=2020-10-05T09%3A28%3A24Z&se=2023-10-06T09%3A28%3A00Z&sr=b&sp=r&sig=Bk85YuxWdzALqe9osqZQ9wha7sVVXyEgRRYTHSkulCA%3D)

![alt text](https://qloudableassets.blob.core.windows.net/az-iot-labs/Advanced/Lab2/17.PNG?st=2019-10-22T09%3A45%3A30Z&se=2022-10-23T09%3A45%3A00Z&sp=rl&sv=2018-03-28&sr=c&sig=FGnsVkizYvdjNm%2Bhy4Ewuyfrtdsga7OJT06BDSwHe1M%3D)

It should throw an error as in the screenshot below, as you do not have access.

![alt text](https://qloudableassets.blob.core.windows.net/az-iot-labs/Advanced/Lab2/18.PNG?st=2019-10-22T09%3A45%3A30Z&se=2022-10-23T09%3A45%3A00Z&sp=rl&sv=2018-03-28&sr=c&sig=FGnsVkizYvdjNm%2Bhy4Ewuyfrtdsga7OJT06BDSwHe1M%3D)

Go back to Azure Portal, Select **Data Access Policies** under Environment Topology of your Times Series Insights Environment, and then click on **+Add**.

![alt text](https://qloudableassets.blob.core.windows.net/az-iot-labs/Advanced/Lab2/19.PNG?st=2019-10-22T09%3A45%3A30Z&se=2022-10-23T09%3A45%3A00Z&sp=rl&sv=2018-03-28&sr=c&sig=FGnsVkizYvdjNm%2Bhy4Ewuyfrtdsga7OJT06BDSwHe1M%3D)

Click on the **Select user** blade, search for the user name or email address to locate the user you want to add and click on **Select** to confirm the selection.

![alt text](https://qloudableassets.blob.core.windows.net/az-iot-labs/Advanced/Lab2/20.PNG?st=2019-10-22T09%3A45%3A30Z&se=2022-10-23T09%3A45%3A00Z&sp=rl&sv=2018-03-28&sr=c&sig=FGnsVkizYvdjNm%2Bhy4Ewuyfrtdsga7OJT06BDSwHe1M%3D)

Navigate to the **Select role** blade and select the appropriate access role for the user:

* Select Contributor if you want to allow the user to change reference data and share saved queries and perspectives with other users of the Environment.

Click on **OK** to confirm the role choice.

![alt text](https://qloudableassets.blob.core.windows.net/az-iot-labs/Advanced/Lab2/21.PNG?st=2019-10-22T09%3A45%3A30Z&se=2022-10-23T09%3A45%3A00Z&sp=rl&sv=2018-03-28&sr=c&sig=FGnsVkizYvdjNm%2Bhy4Ewuyfrtdsga7OJT06BDSwHe1M%3D)

Click **OK** on the Select User Role page.

![alt text](https://qloudableassets.blob.core.windows.net/az-iot-labs/Advanced/Lab2/22.PNG?st=2019-10-22T09%3A45%3A30Z&se=2022-10-23T09%3A45%3A00Z&sp=rl&sv=2018-03-28&sr=c&sig=FGnsVkizYvdjNm%2Bhy4Ewuyfrtdsga7OJT06BDSwHe1M%3D)

Confirm that the **Data Access Policies page** lists the users and the roles for each user.

![alt text](https://qloudableassets.blob.core.windows.net/az-iot-labs/Advanced/Lab2/23.PNG?st=2019-10-22T09%3A45%3A30Z&se=2022-10-23T09%3A45%3A00Z&sp=rl&sv=2018-03-28&sr=c&sig=FGnsVkizYvdjNm%2Bhy4Ewuyfrtdsga7OJT06BDSwHe1M%3D)

Now, try logging in with the user on which you have grant permissions and you must be able to access a page like in the below screenshot.

![alt text](https://qloudableassets.blob.core.windows.net/az-iot-labs/Advanced/Lab2/24.PNG?st=2019-10-22T09%3A45%3A30Z&se=2022-10-23T09%3A45%3A00Z&sp=rl&sv=2018-03-28&sr=c&sig=FGnsVkizYvdjNm%2Bhy4Ewuyfrtdsga7OJT06BDSwHe1M%3D)

## Exercise 3: Create IoT Hub using Azure Portal

Click **+Create a resource**, then search for IoT Hub in search box of Marketplace and select the **IoT Hub** from the list.

![alt text](https://qloudableassets.blob.core.windows.net/az-iot-labs/Advanced/Lab2/25.PNG?st=2019-10-22T09%3A45%3A30Z&se=2022-10-23T09%3A45%3A00Z&sp=rl&sv=2018-03-28&sr=c&sig=FGnsVkizYvdjNm%2Bhy4Ewuyfrtdsga7OJT06BDSwHe1M%3D)

Click **Create**.

![alt text](https://qloudableassets.blob.core.windows.net/az-iot-labs/Advanced/Lab2/26.PNG?st=2019-10-22T09%3A45%3A30Z&se=2022-10-23T09%3A45%3A00Z&sp=rl&sv=2018-03-28&sr=c&sig=FGnsVkizYvdjNm%2Bhy4Ewuyfrtdsga7OJT06BDSwHe1M%3D)

Then you will see the below screen, fill all the required fields.

* **Subscription:** Select as default from the dropdown <br>
* **Resource Group:** {{resource-group-name}} <br>
* **Region:** {{location}} <br>
* **IoTHub Name:** Enter globally unique name for your IoT Hub.

Click **Next: Size and scale** to proceed further with creating IoT Hub.

![alt text](https://qloudableassets.blob.core.windows.net/az-iot-labs/Advanced/Lab2/27.PNG?st=2019-10-22T09%3A45%3A30Z&se=2022-10-23T09%3A45%3A00Z&sp=rl&sv=2018-03-28&sr=c&sig=FGnsVkizYvdjNm%2Bhy4Ewuyfrtdsga7OJT06BDSwHe1M%3D)

```
Pricing and scale tier: B1:Basic tier

```

Click **Review + create**. 

![alt text](https://qloudableassets.blob.core.windows.net/az-iot-labs/Advanced/Lab2/28.PNG?st=2019-10-22T09%3A45%3A30Z&se=2022-10-23T09%3A45%3A00Z&sp=rl&sv=2018-03-28&sr=c&sig=FGnsVkizYvdjNm%2Bhy4Ewuyfrtdsga7OJT06BDSwHe1M%3D)

Click **Create**, which will take few minutes for IoT Hub creation.

![alt text](https://qloudableassets.blob.core.windows.net/az-iot-labs/Advanced/Lab2/29.PNG?st=2019-10-22T09%3A45%3A30Z&se=2022-10-23T09%3A45%3A00Z&sp=rl&sv=2018-03-28&sr=c&sig=FGnsVkizYvdjNm%2Bhy4Ewuyfrtdsga7OJT06BDSwHe1M%3D)

After successful deployment you can see the Deployment succeeded notification as shown like below screen. Click on **Go to resource**.

![alt text](https://qloudableassets.blob.core.windows.net/az-iot-labs/Advanced/Lab2/30.PNG?st=2019-10-22T09%3A45%3A30Z&se=2022-10-23T09%3A45%3A00Z&sp=rl&sv=2018-03-28&sr=c&sig=FGnsVkizYvdjNm%2Bhy4Ewuyfrtdsga7OJT06BDSwHe1M%3D)

### Creating devices on Azure IoT Hub

This Step describes how to create a device in existing IoT Hub. A device cannot connect to IoT Hub unless it has an entry in the identity registry.

In IoT Hub navigation menu, open **IoT Devices**, then select **New** to register a new device in your IoT Hub.

![alt text](https://qloudableassets.blob.core.windows.net/az-iot-labs/Advanced/Lab2/31.PNG?st=2019-10-22T09%3A45%3A30Z&se=2022-10-23T09%3A45%3A00Z&sp=rl&sv=2018-03-28&sr=c&sig=FGnsVkizYvdjNm%2Bhy4Ewuyfrtdsga7OJT06BDSwHe1M%3D)

Provide any user defined name for new device, such as **device-1**, and select **Save**. 

![alt text](https://qloudableassets.blob.core.windows.net/az-iot-labs/Advanced/Lab2/32.PNG?st=2019-10-22T09%3A45%3A30Z&se=2022-10-23T09%3A45%3A00Z&sp=rl&sv=2018-03-28&sr=c&sig=FGnsVkizYvdjNm%2Bhy4Ewuyfrtdsga7OJT06BDSwHe1M%3D)

After the device is created, open the device from the list in the **IoT devices** pane. 

![alt text](https://qloudableassets.blob.core.windows.net/az-iot-labs/Advanced/Lab2/33.PNG?st=2019-10-22T09%3A45%3A30Z&se=2022-10-23T09%3A45%3A00Z&sp=rl&sv=2018-03-28&sr=c&sig=FGnsVkizYvdjNm%2Bhy4Ewuyfrtdsga7OJT06BDSwHe1M%3D)

Copy the **Connection string---primary key** and save it somewhere, this will be used later.

![alt text](https://qloudableassets.blob.core.windows.net/az-iot-labs/Advanced/Lab2/34.PNG?st=2019-10-22T09%3A45%3A30Z&se=2022-10-23T09%3A45%3A00Z&sp=rl&sv=2018-03-28&sr=c&sig=FGnsVkizYvdjNm%2Bhy4Ewuyfrtdsga7OJT06BDSwHe1M%3D)

### Sending data to IoT Hub using online PI simulator

This step describes how to send data to IoT Hub using online PI simulator and learn the basics of working with Raspberry Pi online simulator and then how to seamlessly connect the Pi simulator to the cloud by using Azure IoT Hub.

Copy and paste the below link on to the chrome's new browserto launch Raspberry Pi online simulator.

https://azure-samples.github.io/raspberry-pi-web-simulator/#GetStarted

In code editor window, make sure you are working on the default sample application. Remove the placeholder and update the Azure IoT Hub connection string value of “connectionString” variable.

![alt text](https://qloudableassets.blob.core.windows.net/az-iot-labs/AZiotlabs-lab1/16.png?st=2019-09-11T11%3A57%3A57Z&se=2021-09-12T11%3A57%3A00Z&sp=rl&sv=2018-03-28&sr=b&sig=y8XSg3F610hu2lRJJXY8yXNGAF9sS%2Fl8hqsKPkoJCms%3D)

![alt text](https://qloudableassets.blob.core.windows.net/az-iot-labs/AZiotlabs-lab1/17.png?st=2019-09-11T11%3A58%3A17Z&se=2021-09-12T11%3A58%3A00Z&sp=rl&sv=2018-03-28&sr=b&sig=K%2B3XYmqm%2FFh7uwoFQTXRjzR%2F8y002525FPn%2FwAyNZOQ%3D)

Select **Run** or type “npm start” to run the application.

![alt text](https://qloudableassets.blob.core.windows.net/az-iot-labs/AZiotlabs-lab1/18.png?st=2019-09-11T11%3A59%3A02Z&se=2021-09-12T11%3A59%3A00Z&sp=rl&sv=2018-03-28&sr=b&sig=TaPZ8CBbz%2Bhhfoer9qTLT8j45IDHY69J2I420XzGh5Q%3D)

Once the Simulator start running, it shows below output of the sensor data and the messages that are sent to connected IoT Hub. 

![alt text](https://qloudableassets.blob.core.windows.net/az-iot-labs/AZiotlabs-lab1/19.png?st=2019-09-11T11%3A59%3A21Z&se=2021-09-12T11%3A59%3A00Z&sp=rl&sv=2018-03-28&sr=b&sig=vRmMipG%2FpV9R3j3wpSInExkhSN1FH%2B7avPEAqqOBelw%3D)

Messages will start flowing into IoT Hub, now check the messages in IoT Hub.

![alt text](https://qloudableassets.blob.core.windows.net/az-iot-labs/AZiotlabs-lab1/20.png?st=2019-09-11T11%3A59%3A40Z&se=2021-09-12T11%3A59%3A00Z&sp=rl&sv=2018-03-28&sr=b&sig=GdtyqmKhr2cble0CSK33PgSrfS1yYkrNQYO5XfMVa7s%3D)

## Exercise 4: Add an IoT Hub Event source to your Time Series Insights Environment

### Add a consumer group to your IoT Hub

Find and open your IoT Hub on the Azure Portal.

In the menu under the **Settings**, select **Built-in Endpoints**, and then click on the **Events** endpoint.

Under **Consumer groups**, enter a unique name for the consumer group. Use the same name as in your Time Series Insights Environment when you create a new event source.

Proceed to **Save**.

![alt text](https://qloudableassets.blob.core.windows.net/az-iot-labs/Advanced/Lab2/35.PNG?st=2019-10-22T09%3A45%3A30Z&se=2022-10-23T09%3A45%3A00Z&sp=rl&sv=2018-03-28&sr=c&sig=FGnsVkizYvdjNm%2Bhy4Ewuyfrtdsga7OJT06BDSwHe1M%3D)

### Add a new event source

Go to **Resource Group** -> select your **Time Series Insights** Environment.

Navigate to the Event Sources under the Environment Topology and then click on **Add**.

![alt text](https://qloudableassets.blob.core.windows.net/az-iot-labs/Advanced/Lab2/36.PNG?st=2019-10-22T09%3A45%3A30Z&se=2022-10-23T09%3A45%3A00Z&sp=rl&sv=2018-03-28&sr=c&sig=FGnsVkizYvdjNm%2Bhy4Ewuyfrtdsga7OJT06BDSwHe1M%3D)

In the New event source pane, for Event source name, enter a name that's unique to this Time Series Insights Environment.

For Source, select the IoT Hub.

Select a value for Import option:

* If you already have an IoT Hub in one of your subscriptions, select Use IoT Hub from available subscriptions. This option is the easiest approach.

* If the IoT Hub is external to your subscriptions, or if you want to choose advanced options, select Provide IoT Hub settings manually.

Add the dedicated Time Series Insights consumer group name, that you added to your IoT Hub.

Click on **Create**.

![alt text](https://qloudableassets.blob.core.windows.net/az-iot-labs/Advanced/Lab2/37.PNG?st=2019-10-22T09%3A45%3A30Z&se=2022-10-23T09%3A45%3A00Z&sp=rl&sv=2018-03-28&sr=c&sig=FGnsVkizYvdjNm%2Bhy4Ewuyfrtdsga7OJT06BDSwHe1M%3D)

![alt text](https://qloudableassets.blob.core.windows.net/az-iot-labs/Advanced/Lab2/38.PNG?st=2019-10-22T09%3A45%3A30Z&se=2022-10-23T09%3A45%3A00Z&sp=rl&sv=2018-03-28&sr=c&sig=FGnsVkizYvdjNm%2Bhy4Ewuyfrtdsga7OJT06BDSwHe1M%3D)

You can see the added event source, under the Event Sources as shown in the screenshot below.

![alt text](https://qloudableassets.blob.core.windows.net/az-iot-labs/Advanced/Lab2/39.PNG?st=2019-10-22T09%3A45%3A30Z&se=2022-10-23T09%3A45%3A00Z&sp=rl&sv=2018-03-28&sr=c&sig=FGnsVkizYvdjNm%2Bhy4Ewuyfrtdsga7OJT06BDSwHe1M%3D)

## Exercise 5: Visualize the Data in Time Series Insights Explorer

Go to **Resource Group** -> Select created **Time Series Insights** -> **Overview** -> **Go to Environment**.

![alt text](https://qloudableassets.blob.core.windows.net/az-iot-labs/Advanced/Lab2/40.PNG?st=2019-10-22T09%3A45%3A30Z&se=2022-10-23T09%3A45%3A00Z&sp=rl&sv=2018-03-28&sr=c&sig=FGnsVkizYvdjNm%2Bhy4Ewuyfrtdsga7OJT06BDSwHe1M%3D)

In Time Series Insights Explorer, you can see the Messages average and sum by *Message ID*, *temperature*, *humidity*, *events* separately as shown in the screenshot below.

![alt text](https://qloudableassets.blob.core.windows.net/az-iot-labs/Advanced/Lab2/t22.png?st=2019-10-22T09%3A45%3A30Z&se=2022-10-23T09%3A45%3A00Z&sp=rl&sv=2018-03-28&sr=c&sig=FGnsVkizYvdjNm%2Bhy4Ewuyfrtdsga7OJT06BDSwHe1M%3D)

![alt text](https://qloudableassets.blob.core.windows.net/az-iot-labs/Advanced/Lab2/t23.png?st=2019-10-22T09%3A45%3A30Z&se=2022-10-23T09%3A45%3A00Z&sp=rl&sv=2018-03-28&sr=c&sig=FGnsVkizYvdjNm%2Bhy4Ewuyfrtdsga7OJT06BDSwHe1M%3D)

![alt text](https://qloudableassets.blob.core.windows.net/az-iot-labs/Advanced/Lab2/t24.png?st=2019-10-22T09%3A45%3A30Z&se=2022-10-23T09%3A45%3A00Z&sp=rl&sv=2018-03-28&sr=c&sig=FGnsVkizYvdjNm%2Bhy4Ewuyfrtdsga7OJT06BDSwHe1M%3D)

You can also split the message by *device id*, *Event source* name as in the screenshot below.

![alt text](https://qloudableassets.blob.core.windows.net/az-iot-labs/Advanced/Lab2/t25.png?st=2019-10-22T09%3A45%3A30Z&se=2022-10-23T09%3A45%3A00Z&sp=rl&sv=2018-03-28&sr=c&sig=FGnsVkizYvdjNm%2Bhy4Ewuyfrtdsga7OJT06BDSwHe1M%3D)

![alt text](https://qloudableassets.blob.core.windows.net/az-iot-labs/Advanced/Lab2/t27.png?st=2019-10-22T09%3A45%3A30Z&se=2022-10-23T09%3A45%3A00Z&sp=rl&sv=2018-03-28&sr=c&sig=FGnsVkizYvdjNm%2Bhy4Ewuyfrtdsga7OJT06BDSwHe1M%3D)

You can also visualize the data in Time Series Insights as *CHART*, *HEATMAP* and *TABLE*. 

Below screenshots shows the **HEATMAP** view.

![alt text](https://qloudableassets.blob.core.windows.net/az-iot-labs/Advanced/Lab2/t28.png?st=2019-10-22T09%3A45%3A30Z&se=2022-10-23T09%3A45%3A00Z&sp=rl&sv=2018-03-28&sr=c&sig=FGnsVkizYvdjNm%2Bhy4Ewuyfrtdsga7OJT06BDSwHe1M%3D)

Below screen shows the **CHART** view.

![alt text](https://qloudableassets.blob.core.windows.net/az-iot-labs/Advanced/Lab2/t29.png?st=2019-10-22T09%3A45%3A30Z&se=2022-10-23T09%3A45%3A00Z&sp=rl&sv=2018-03-28&sr=c&sig=FGnsVkizYvdjNm%2Bhy4Ewuyfrtdsga7OJT06BDSwHe1M%3D)

Below screen shows the **TABLE** view.

![alt text](https://qloudableassets.blob.core.windows.net/az-iot-labs/Advanced/Lab2/t26.png?st=2019-10-22T09%3A45%3A30Z&se=2022-10-23T09%3A45%3A00Z&sp=rl&sv=2018-03-28&sr=c&sig=FGnsVkizYvdjNm%2Bhy4Ewuyfrtdsga7OJT06BDSwHe1M%3D)

> **Result:** After completing this lab, you have deployed Time Series Insights and IoT Hub using Azure Portal, add an IoT Hub event source to your Time Series Insights Environment and Visalize the data in Time Series Insights Explorer.
